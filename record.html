<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</h1>

  <form id="recordForm">
    <label>‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£: <input type="text" id="project" required></label><br>
    <label>‡πÅ‡∏õ‡∏•‡∏á: <input type="text" id="plot" required></label><br>
    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°: <input type="date" id="startDate" required></label><br>
    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à: <input type="date" id="endDate"></label><br>
    <label>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: <textarea id="description" required></textarea></label><br>
    <label>‡∏£‡∏π‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥: <input type="file" id="beforeImage" accept="image/*"></label><br>
    <label>‡∏£‡∏π‡∏õ‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏≥: <input type="file" id="afterImage" accept="image/*"></label><br>
    <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:
      <select id="status">
        <option>‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</option>
        <option>QC Pass</option>
        <option>‡∏•‡∏π‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö</option>
      </select>
    </label><br><br>
    <button type="button" onclick="saveRecord()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
    <button type="button" onclick="loadRecords()">üìÇ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°</button>
    <button type="button" onclick="location.href='index.html'">üîô ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</button>
  </form>

  <div id="recordList"></div>

  <script>
    function saveRecord() {
      const record = {
        project: document.getElementById('project').value,
        plot: document.getElementById('plot').value,
        startDate: document.getElementById('startDate').value,
        endDate: document.getElementById('endDate').value,
        description: document.getElementById('description').value,
        status: document.getElementById('status').value,
        user: localStorage.getItem('aeUser') || '-',
        timestamp: new Date().toISOString()
      };
      const data = JSON.parse(localStorage.getItem('aeRecords') || '[]');
      data.push(record);
      localStorage.setItem('aeRecords', JSON.stringify(data));
      alert('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
    }

    function loadRecords() {
      const data = JSON.parse(localStorage.getItem('aeRecords') || '[]');
      const container = document.getElementById('recordList');
      container.innerHTML = '<h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</h3>' + data.map((r, i) => 
        `<div><b>${i+1}.</b> [${r.project}] ‡πÅ‡∏õ‡∏•‡∏á ${r.plot} - ${r.status} (${r.startDate})</div>`
      ).join('');
    }
  </script>
</body>
</html>